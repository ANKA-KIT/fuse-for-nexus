# -*- rpm-spec -*-
Buildroot: @NXFS_BUILD_DIR@/_CPack_Packages/Linux/RPM/@CPACK_PACKAGE_FILE_NAME@
Summary:        FUSE for NeXus file with data filtering based on rules stored in xml file
Name:           @CPACK_PACKAGE_NAME@
Version:        @CPACK_PACKAGE_VERSION@
Release:        @CPACK_PACKAGE_RELEASE@
License:        GPL
Group:          Development/Libraries
Vendor:         @CPACK_PACKAGE_VENDOR@
Prefix:         @CPACK_PACKAGING_INSTALL_PREFIX@
Requires:	libtiff >= 3
Requires:	libpninx = 20130516 
Requires:	fuse >= 2.8
BuildRequires:	libtiff-devel >= 3
BuildRequires:	fuse-devel >= 2.8

#p define prefix /usr/local
%define _rpmdir @NXFS_BUILD_DIR@/_CPack_Packages/Linux/RPM
%define _rpmfilename @CPACK_PACKAGE_FILE_NAME@.rpm
%define _unpackaged_files_terminate_build 0
%define _topdir @NXFS_BUILD_DIR@/_CPack_Packages/Linux/RPM

%description
This app allows you to mount NeXus file as a filesystem. It represents data from NeXus file in different ways. Current version contains the following rules: rule for image data, rule for table data.


# This is a shortcutted spec file generated by CMake RPM generator
# we skip _install step because CPack does that for us.
# We do only save CPack installed tree in _prepr
# and then restore it in build.
%prep
mv $RPM_BUILD_ROOT @CMAKE_CURRENT_BINARY_DIR@/_CPack_Packages/Linux/RPM/tmpBBroot

%install
if [ -e $RPM_BUILD_ROOT ];
then
  rm -Rf $RPM_BUILD_ROOT
fi 
mv "@CMAKE_CURRENT_BINARY_DIR@/_CPack_Packages/Linux/RPM/tmpBBroot" $RPM_BUILD_ROOT 

%files
%defattr(-,root,root,-)
#@CPACK_PACKAGING_INSTALL_PREFIX@/@LIB_INSTALL_DIR@/*
@CPACK_PACKAGING_INSTALL_PREFIX@/bin/NXFS
@CPACK_PACKAGING_INSTALL_PREFIX@/share/NXFS/rules.xml
#@CPACK_PACKAGING_INSTALL_PREFIX@/bin/smarxrm

%changelog
* Tue Jun 18 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.5-1
- Added precision feature to the rule "table_csv". And fixed some stability bugs.
* Thu Jun 13 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.4-1
- Added value format feature to the rule "table_csv"
* Wed Jun 12 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.3-1
- Implemented table_csv rule read function for NXField
* Tue May 28 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.2-1
- Added column titles in tables and extension for table files.
* Tue May 24 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.1-1
- Errors fixed. XML file is optional, and default XML file added to package.
* Tue May 14 2013 Egor Yurchenko <egor.iurchenko@kit.edu> 1.0.0-1
- First CPack package version
